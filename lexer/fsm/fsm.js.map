{"version":3,"sources":["../../../../src/main/lexer/fsm/fsm.js"],"names":["InvalidFsmState","Fsm","states","startState","finalStates","transition","Set","input","buffer","state","i","length","symbol","charAt","tmpState","recognized","has","value"],"mappings":";;;;;;;;;;AAAO,IAAMA,4CAAkB,CAAC,CAAzB;;IAEMC,G,WAAAA,G;AAET,iBAAYC,MAAZ,EAAoBC,UAApB,EAAgCC,WAAhC,EAA6CC,UAA7C,EAAyD;AAAA;;AACrD,aAAKH,MAAL,GAAcA,kBAAkBI,GAAlB,GAAwBJ,MAAxB,GAAiC,IAAII,GAAJ,EAA/C;AACA,aAAKH,UAAL,GAAkBA,UAAlB;AACA,aAAKE,UAAL,GAAkBA,UAAlB;AACA,aAAKD,WAAL,GAAmBA,uBAAuBE,GAAvB,GAA6BF,WAA7B,GAA2C,IAAIE,GAAJ,EAA9D;AACH;;;;4BAEGC,K,EAAO;AACP,gBAAIC,SAAS,EAAb;AACA,gBAAIC,QAAQ,KAAKN,UAAjB;;AAEA,iBAAK,IAAIO,IAAI,CAAR,EAAWC,SAASJ,MAAMI,MAA/B,EAAuCD,IAAIC,MAA3C,EAAmD,EAAED,CAArD,EAAwD;AACpD,oBAAIE,SAASL,MAAMM,MAAN,CAAaH,CAAb,CAAb;;AAEA,oBAAII,WAAW,KAAKT,UAAL,CAAgBI,KAAhB,EAAuBG,MAAvB,CAAf;AACA,oBAAIE,aAAad,eAAjB,EAAkC;AAC9B;AACH;;AAEDS,wBAAQK,QAAR;;AAEAN,0BAAUI,MAAV;AACH;;AAED,mBAAO,EAAEG,YAAY,KAAKX,WAAL,CAAiBY,GAAjB,CAAqBP,KAArB,CAAd,EAA2CQ,OAAOT,MAAlD,EAAP;AACH","file":"fsm.js","sourcesContent":["export const InvalidFsmState = -1;\n\nexport class Fsm {\n\n    constructor(states, startState, finalStates, transition) {\n        this.states = states instanceof Set ? states : new Set();\n        this.startState = startState;\n        this.transition = transition;\n        this.finalStates = finalStates instanceof Set ? finalStates : new Set();\n    }\n\n    run(input) {\n        let buffer = '';\n        let state = this.startState;\n\n        for (let i = 0, length = input.length; i < length; ++i) {\n            let symbol = input.charAt(i);\n\n            let tmpState = this.transition(state, symbol);\n            if (tmpState === InvalidFsmState) {\n                break;\n            }\n\n            state = tmpState;\n            \n            buffer += symbol;\n        }\n\n        return { recognized: this.finalStates.has(state), value: buffer };\n    }\n}"]}