{"version":3,"sources":["../../../src/main/interpreter/store.js"],"names":["Store","locations","allocated","value","address","size","length","push","undefined"],"mappings":";;;;;;;;;;IAAaA,K,WAAAA,K;AAET,qBAAc;AAAA;;AACV,aAAKC,SAAL,GAAiB,EAAjB;AACA,aAAKC,SAAL,GAAiB,EAAjB;AACH;;;;8BAEKC,K,EAAO;AACT,gBAAIC,UAAU,CAAd;AACA,gBAAIC,OAAO,KAAKJ,SAAL,CAAeK,MAA1B;;AAEA,mBAAOF,UAAUC,IAAV,IAAkB,KAAKH,SAAL,CAAeE,OAAf,CAAzB,EAAkD;AAC9CA;AACH;;AAED,gBAAIA,UAAUC,IAAd,EAAoB;AAChB,qBAAKJ,SAAL,CAAeG,OAAf,IAA0BD,KAA1B;;AAEAA,sBAAMC,OAAN,GAAgBA,OAAhB;;AAEA,qBAAKF,SAAL,CAAeE,OAAf,IAA0B,IAA1B;;AAEA,uBAAOA,OAAP;AACH;;AAED,iBAAKH,SAAL,CAAeM,IAAf,CAAoBJ,KAApB;AACA,iBAAKD,SAAL,CAAeK,IAAf,CAAoB,IAApB;;AAEAJ,kBAAMC,OAAN,GAAgBC,IAAhB;;AAEA,mBAAOA,IAAP;AACH;;;6BAEID,O,EAAS;AACV,gBAAIA,WAAW,CAAX,IAAgBA,UAAU,KAAKF,SAAL,CAAeI,MAA7C,EAAqD;AACjD,qBAAKJ,SAAL,CAAeE,OAAf,IAA0B,KAA1B;AACH;AACJ;;;4BAEGA,O,EAASD,K,EAAO;AAChB,gBAAIC,WAAW,CAAX,IAAgBA,UAAU,KAAKH,SAAL,CAAeK,MAA7C,EAAqD;AACjD,qBAAKL,SAAL,CAAeG,OAAf,IAA0BD,KAA1B;AACH;AACJ;;;4BAEGC,O,EAAS;AACT,gBAAIA,WAAW,CAAX,IAAgBA,UAAU,KAAKH,SAAL,CAAeK,MAA7C,EAAqD;AACjD,uBAAO,KAAKL,SAAL,CAAeG,OAAf,CAAP;AACH;;AAED,mBAAOI,SAAP;AACH","file":"store.js","sourcesContent":["export class Store {\n\n    constructor() {\n        this.locations = [];\n        this.allocated = [];\n    }\n\n    alloc(value) {\n        let address = 0;\n        let size = this.locations.length;\n\n        while (address < size && this.allocated[address]) {\n            address++;\n        }\n\n        if (address < size) {\n            this.locations[address] = value;\n\n            value.address = address;\n\n            this.allocated[address] = true;\n\n            return address;\n        }\n\n        this.locations.push(value);\n        this.allocated.push(true);\n\n        value.address = size;\n\n        return size;\n    }\n\n    free(address) {\n        if (address >= 0 && address < this.allocated.length) {\n            this.allocated[address] = false;\n        }\n    }\n\n    put(address, value) {\n        if (address >= 0 && address < this.locations.length) {\n            this.locations[address] = value;\n        }\n    }\n\n    get(address) {\n        if (address >= 0 && address < this.locations.length) {\n            return this.locations[address];\n        }\n\n        return undefined;\n    }\n}"]}