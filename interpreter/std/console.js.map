{"version":3,"sources":["../../../../src/main/interpreter/std/console.js"],"names":["fs","process","readline","consoleClass","name","Types","console","superClass","Object","functions","push","Function","Formal","Unit","NativeExpression","context","call","FunctionCall","Reference","s","Evaluator","evaluate","console","log","get","Obj","create","String","stdin","pause","prompt","store","environment","find","input","question","value","set","resume","Int","questionInt","Double","questionFloat","Class"],"mappings":"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","file":"console.js","sourcesContent":["import * as fs from 'fs'\nimport * as process from 'process'\nimport * as readline from 'readline-sync'\nimport { Class } from '../../ast/class'\nimport { Evaluator } from '../../interpreter/evaluator'\nimport { Formal } from '../../ast/formal'\nimport { Function } from '../../ast/func'\nimport { FunctionCall } from '../../ast/functioncall'\nimport { NativeExpression } from '../../ast/nativeexpression'\nimport { Obj } from '../../interpreter/object'\nimport { Reference } from '../../ast/reference'\nimport { Types } from '../../types/types'\n\nexport class consoleClass extends Class {\n\n    constructor() {\n        super();\n\n        this.name = Types.console;\n\n        this.superClass = Types.Object;\n\n        this.functions.push(new Function('print', [new Formal('s', Types.Object)], Types.Unit,\n            new NativeExpression((context) => {\n                let call = new FunctionCall(new Reference('s'), 'toString', []);\n\n                let s = Evaluator.evaluate(context, call);\n\n                console.log(s.get('value'));\n\n                return Obj.create(context, Types.Unit);\n            })));\n\n        this.functions.push(new Function('print', [], Types.Unit,\n            new NativeExpression((context) => {\n                console.log();\n\n                return Obj.create(context, Types.Unit);\n            })));\n\n        this.functions.push(new Function('readString', [new Formal('prompt', Types.String)], Types.String,\n            new NativeExpression((context) => {\n                process.stdin.pause();\n\n                let prompt = context.store.get(context.environment.find('prompt'));\n\n                let input = readline.question(prompt.get('value'));\n\n                console.log();\n\n                let value = Obj.create(context, Types.String);\n\n                value.set('value', input);\n\n                process.stdin.resume();\n\n                return value;\n            })));\n\n        this.functions.push(new Function('readInt', [new Formal('prompt', Types.String)], Types.Int,\n            new NativeExpression((context) => {\n                process.stdin.pause();\n\n                let prompt = context.store.get(context.environment.find('prompt'));\n\n                let input = readline.questionInt(prompt.get('value'));\n\n                console.log();\n\n                let value = Obj.create(context, Types.Int);\n\n                value.set('value', input);\n\n                process.stdin.resume();\n\n                return value;\n            })));\n\n        this.functions.push(new Function('readDouble', [new Formal('prompt', Types.String)], Types.Double,\n            new NativeExpression((context) => {\n                process.stdin.pause();\n\n                let prompt = context.store.get(context.environment.find('prompt'));\n\n                let input = readline.questionFloat(prompt.get('value'));\n\n                console.log();\n\n                let value = Obj.create(context, Types.Double);\n\n                value.set('value', input);\n\n                process.stdin.resume();\n\n                return value;\n            })));\n\n\n\n        this.functions.push(new Function('readString', [], Types.String,\n            new NativeExpression((context) => {\n                process.stdin.pause();\n\n                let input = readline.question('');\n\n                console.log();\n\n                let value = Obj.create(context, Types.String);\n\n                value.set('value', input);\n\n                process.stdin.resume();\n\n                return value;\n            })));\n\n        this.functions.push(new Function('readInt', [], Types.Int,\n            new NativeExpression((context) => {\n                process.stdin.pause();\n\n                let input = readline.questionInt('');\n\n                console.log();\n\n                let value = Obj.create(context, Types.Int);\n\n                value.set('value', input);\n\n                process.stdin.resume();\n\n                return value;\n            })));\n\n        this.functions.push(new Function('readDouble', [], Types.Double,\n            new NativeExpression((context) => {\n                process.stdin.pause();\n\n                let input = readline.questionFloat('');\n\n                console.log();\n\n                let value = Obj.create(context, Types.Double);\n\n                value.set('value', input);\n\n                process.stdin.resume();\n\n                return value;\n            })));\n    }\n}"]}